<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>W.U. Tic-Tac-Toe by Joshua D. Thomas</title>
    <style>
        button {
            font-size: 16pt;
            width: 7.0%;
            height: fit-content;
            margin-right: 2.0%;
            border-radius: 5px;
        }

        label {
            margin-right: 15px;
        }

        .ScoreBoard {
            text-align: center;
            margin-left: auto;
            margin-right: auto;
        }

        .board {
            display: grid;
            grid-template-columns: repeat(5, 100px);
            grid-template-rows: repeat(5, 100px);
            gap: 2px;
            width: 480px;
            align-items: center;
            justify-content: center;
            margin: auto;
        }

        .center{
            margin-left: auto;
            margin-right: auto;
        }

        .cell {
            width: 90px;
            height: 70px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: bold;
            border: 1px solid black;
        }

        .tmp_Img_WU{
            /* 90px by 70px Image placeholder */
            background-image:none;
        }

        .hov_Img_X{
            /* 90px by 70px Image placeholder */
            background-image:none;
        }

        .hov_Img_O{
            /* 90px by 70px Image placeholder */
            background-image:none;
        }
    </style>
</head>
<body onload="createBoard()">
<div class="ScoreBoard">
    <h2>Wilmington University Tic-Tac-Toe</h2>
    <div class="center">
        <label for="W_Score">W</label><button id="W_Score">00</button>
        <label for="U_Score">U</label><button id="U_Score">00</button>
    </div>
</div>

<div class="board"></div>

<script>
    const board = document.querySelector(".board");
    let size = 5;
    let cells = [];
    let currentPlayer = "W";
    let W_points = 0;
    let U_points = 0;

    function createBoard(){
    // Create the board dynamically
        for (let i = 0; i < (size * size); i++) {
                let cell = document.createElement("div");
                cell.classList.add("cell");
                cell.dataset.index = i;
                cell.classList.add("tmp_Img_WU");
                cell.addEventListener("mouseover", () => {
                    if(currentPlayer === "W"){
                        cell.classList.add("hov_Img_X");
                    }
                    if(currentPlayer === "U"){
                        cell.classList.add("hov_Img_O");
                    }
                });

                cell.addEventListener("mouseout", () => {
                    if(currentPlayer === "W"){
                        cell.classList.remove("hov_Img_X");
                    }
                    if(currentPlayer === "U"){
                        cell.classList.remove("hov_Img_O");
                    }
                });

                cell.addEventListener("click", handleClick);
                board.appendChild(cell);
                cells.push(cell);
        }
    }

    function handleClick(event) {
        let cell = event.target;
        if (cell.textContent === "") {
            cell.textContent = currentPlayer;
            if (checkWinner()) {
                alert(`${currentPlayer} wins!`);
                reset_Points();
                location.reload();
            } else {
                cell.classList.remove("tmp_Img_WU");
                if(currentPlayer === "W"){
                            cell.classList.remove("hov_Img_X");
                            W_points += 50;
                            document.getElementById("W_Score").innerText = W_points.toString();
                }

                if(currentPlayer === "U"){
                            cell.classList.remove("hov_Img_O");
                            U_points += 50;
                            document.getElementById("U_Score").innerText = U_points.toString();
                }

                currentPlayer = currentPlayer === "W" ? "U" : "W";
            }
        }
    }

    function checkWinner() {
        let grid = cells.map(cell => cell.textContent);

        // Check rows, columns, and diagonals
        for (let i = 0; i < size; i++) {
            // Check rows
            if (allSame(grid.slice(i * size, (i + 1) * size))) return true;
            // Check columns
            if (allSame(grid.filter((_, index) => index % size === i))) return true;
        }

        // Check diagonals
        if (allSame(grid.filter((_, index) => index % (size + 1) === 0))) return true;
        if (allSame(grid.filter((_, index) => index > 0 && index % (size - 1) === 0 && index < (size * size - 1)))) return true;

        return false;
    }

    function allSame(arr) {
        return arr.every(cell => cell === currentPlayer && cell !== "");
    }

    function reset_Points() {
        W_points = 0;
        U_points = 0;
    }
</script>
<!-- END HTML Body -->
</body>
</html>
